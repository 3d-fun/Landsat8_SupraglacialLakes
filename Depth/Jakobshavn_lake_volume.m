%Plotting Figure 4 (Pope 2016, Earth and Space Science) using Sermeq Kujalleq data

directory = ' /Volumes/ELEMENTS/SermeqKujalleq2015/HighRez/';

%make a list of file names
Scenes = {'LC80060122015166LGN00'; ... Notes
'LC80060122015182LGN00'; ...
'LC80060122015198LGN00'; ...
'LC80060122015214LGN00'; ...
'LC80060132015166LGN00'; ...
'LC80060132015182LGN00'; ...
'LC80060132015198LGN00'; ...
'LC80060132015214LGN00'; ...
'LC80060132015230LGN00'; ...
'LC80060142015166LGN00'; ...
'LC80060142015182LGN00'; ...
'LC80060142015198LGN00'; ...
'LC80060142015214LGN00'; ...
'LC80060152015166LGN00'; ...
'LC80060152015182LGN00'; ...
'LC80060152015198LGN00'; ...
'LC80060152015214LGN00'; ...
'LC80070122015189LGN00'; ...
'LC80070122015237LGN00'; ...
'LC80070132015189LGN00'; ...
'LC80070132015205LGN01'; ... %Note LGN01 - hard coded below
'LC80070132015237LGN00'; ...
'LC80070132015253LGN00'; ...
'LC80070142015189LGN00'; ...
'LC80070142015205LGN01'; ... %Note LGN01 - hard coded below
'LC80070142015237LGN00'; ...
'LC80070142015253LGN00'; ...
'LC80080112015180LGN00'; ...
'LC80080112015196LGN00'; ...
'LC80080112015212LGN00'; ...
'LC80080112015228LGN00'; ...
'LC80080122015164LGN00'; ...
'LC80080122015180LGN00'; ...
'LC80080122015196LGN00'; ...
'LC80080122015212LGN00'; ...
'LC80090112015155LGN00'; ...
'LC80090112015187LGN00'; ...
'LC80090112015235LGN00'; ...
'LC80090112015251LGN00'; ...
'LC80090122015155LGN00'; ...
'LC80090122015171LGN00'; ...
'LC80090122015187LGN00'; ...
'LC80090122015235LGN00'; ...
'LC80090122015251LGN00'; ...
'LC80100112015162LGN00'; ...
'LC80100112015194LGN00'; ...
'LC80100112015210LGN00'; ...
'LC80100112015226LGN00'};

home = pwd;

%then parse those into pathrow / dates
pathrows = cell(size(Scenes));
doys = cell(size(Scenes));

pathrows_num = zeros(size(Scenes));
doys_num = zeros(size(Scenes));

for scene = 1:size(Scenes,1)
    temp = char(Scenes{scene});
    pathrows{scene} = temp(4:9);
    doys{scene} = temp(14:16);
    
    pathrows_num(scene) = str2num(temp(4:9));
    doys_num(scene) = str2num(temp(14:16));
end
clear temp scene

u_pathrows = unique(pathrows);
u_pathrows_num = unique(pathrows_num);

for scene = 1:size(u_pathrows,1)
    temp = find(pathrows_num == u_pathrows_num(scene));
    days = doys_num(temp);
    days = [days, zeros(size(days))];
    
    expression = strcat('x',u_pathrows{scene},' = days;');
    eval(expression);
end
clear temp scene expression days

for scene = 1:size(u_pathrows,1)
    expression = strcat('days = size(x',u_pathrows{scene},',1);');
    eval(expression);
    
    for day = 1:days
        expression = strcat('doy = num2str(x',u_pathrows{scene},'(',num2str(day),',1));');
        eval(expression);
        
        if scene == 6 && day == 2
            expression = strcat('cd ',directory,'LC8',u_pathrows{scene},'2015',doy,'LGN01/');
            eval(expression);
        
            expression = strcat('x',u_pathrows{scene},'(',num2str(day),',2)',' = sum(sum(imread(''LC8',u_pathrows{scene},'2015',doy,'LGN01_B48_depth1.tif'')))*30*30/1000;');
            eval(expression);
        elseif scene == 7 && day == 2
            expression = strcat('cd ',directory,'LC8',u_pathrows{scene},'2015',doy,'LGN01/');
            eval(expression);
        
            expression = strcat('x',u_pathrows{scene},'(',num2str(day),',2)',' = sum(sum(imread(''LC8',u_pathrows{scene},'2015',doy,'LGN01_B48_depth1.tif'')))*30*30/1000;');
            eval(expression);
        else
            expression = strcat('cd ',directory,'LC8',u_pathrows{scene},'2015',doy,'LGN00/');
            eval(expression);

            expression = strcat('x',u_pathrows{scene},'(',num2str(day),',2)',' = sum(sum(imread(''LC8',u_pathrows{scene},'2015',doy,'LGN00_B48_depth1.tif'')))*30*30/1000;');
            eval(expression);
        end
    end
end
clear scene day days doy expression

%Still kept plot creation hard-coded
figure();
plot(x010011(:,1),x010011(:,2))
hold on
plot(x009011(:,1),x009011(:,2))
plot(x009012(:,1),x009012(:,2))
plot(x008011(:,1),x008011(:,2))
plot(x008012(:,1),x008012(:,2))
plot(x007012(:,1),x007012(:,2))
plot(x007013(:,1),x007013(:,2))
plot(x007014(:,1),x007014(:,2))
plot(x006012(:,1),x006012(:,2))
plot(x006013(:,1),x006013(:,2))
plot(x006014(:,1),x006014(:,2))
plot(x006015(:,1),x006015(:,2))
hold off
legend('x010011','x009011','x009012','x008011','x008012','x007012','x007013','x007014','x006012','x006013','x006014','x006015','Location','northwest');

expression = strcat('cd ''',home,'''');
eval(expression);

clear d* expression home p* Scenes u*
save Jakobs_lake_vol